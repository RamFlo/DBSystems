<!DOCTYPE html>
<html lang="en">
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src='https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js'></script>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angucomplete-alt/3.0.0/angucomplete-alt.min.js"></script>
<script src='static/js/angular-datatables.min.js'></script>


<!--<script src='js/angular-datatables.min.js'></script>-->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>

<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.css' rel='stylesheet' />


<script src='https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js'></script>
<!--<link type="text/css" href='https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css' rel='stylesheet' />-->


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
<link rel="stylesheet" href="static/css/angucomplete-alt.css"/>
<!--<link rel="stylesheet" href="css/angucomplete-alt.css"/>-->
<link type="text/css" href='https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css' rel='stylesheet' />
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>


<style>
    body {
        margin: 0;
        padding: 0;
    }

    #map {
    }
    .marker {
        background-image: url('static/resources/mapbox-icon.png');
        background-size: cover;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
    }
    .mapboxgl-popup {
        max-width: 200px;
    }

    .mapboxgl-popup-content {
        text-align: center;
        font-family: 'Open Sans', sans-serif;
    }
</style>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
</head>
<body ng-app="myApp" ng-controller="mainController">
<div style="background-image: url('static/resources/food_table.JPG'); height: 200px;">
</div>
<div>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <div class="navbar-text">
        <a class="navbar-brand">The Food Court</a>
        </div>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href ng-click="decision(0)">Ingredients</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href ng-click="decision(1)">Cuisines</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href ng-click="decision(2)">Best franchise location</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href ng-click="decision(3)">Find restaurants by taste</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href ng-click="decision(4)">Find restaurants by taste</a>
            </li>
        </ul>
    </nav>

<!--ingredient div-->
<div ng-show="searchType == 0" style="width:800px; margin:0 auto; text-align: left;">
    <br>
    <div id="ingredientMainDiv">
    <div angucomplete-alt id="ingredient" placeholder="Insert ingredient..." selected-object="selectedObj" text-searching="Searching for results..." remote-api-handler="autocompleteIngHandler"
         title-field="ingredient" minlength="1" input-class="form-control form-control-small" input-changed="autoComplete" match-class="highlight" parse-input="parseInput">
    </div>
        <!--<div angucomplete-alt pause="400" selected-object="obj" remote-api-handler="autocompleteIngHandler" title-field="ingredient" minlength="1"></div>-->

        <p>Select price range: </p>
        <form id="restByIngredientPrice">
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-secondary active">
                        <input ng-model="ingredPriceLevel" ng-value="0" type="radio" name="priceRange" id="option1" autocomplete="off" checked> Unbounded
                    </label>
                    <label class="btn btn-secondary">
                        <input ng-model="ingredPriceLevel" ng-value="1" type="radio" name="priceRange" id="option2" autocomplete="off"> $
                    </label>
                    <label class="btn btn-secondary">
                        <input ng-model="ingredPriceLevel" ng-value="2" type="radio" name="priceRange" id="option3" autocomplete="off"> $$
                    </label>
                <label class="btn btn-secondary">
                    <input ng-model="ingredPriceLevel" ng-value="3" type="radio" name="priceRange" id="option4" autocomplete="off"> $$$
                </label>
                <label class="btn btn-secondary">
                    <input ng-model="ingredPriceLevel" ng-value="4" type="radio" name="priceRange" id="option5" autocomplete="off"> $$$$
                </label>
            </div>
            <br>
            <div class="btn-group-toggle" data-toggle="buttons">
                <br>
                <label class="btn btn-secondary">
                    <input type="checkbox" autocomplete="off" id="ingredDelivery"> Online delivery
                </label>
            </div>
            <br>
            <div class="btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-secondary">
                    <input type="checkbox" autocomplete="off" id="currentLocation"> Search only around current location
                </label>
            </div>
        </form>
        <br>
    <input class="btn btn-success" type="submit" ng-click="submitIngredient()" value="Search">
    </div>
</div>

    <br>

    <!--map-->
    <div style="width:800px; margin:0 auto; text-align: left;">
        <div ng-show="searchType == 0 || searchType == 2" id='map' style="width: 600px; height: 500px;"></div>
    </div>


    <div ng-show="searchType == 0" style="width:800px; margin:0 auto; text-align: left;">


        Restaurants found:


        <table datatable="ng" id="restFromIngredTable" class="table table-striped table-bordered" style="margin: 0 auto;">
            <thead>
            <tr>
                <th>Restaurant Name</th>
                <th>Price Category</th>
                <th>Rating</th>
                <th>Show on map</th>
            </tr>
            </thead>
            <tbody>
            <tr  style="text-align: center;" ng-repeat="rest in restFromIngred">
                <td>{{rest.restaurant_name}}</td>
                <td>{{rest.price_category}}</td>
                <td>{{rest.agg_review}}</td>
                <td><a href ng-click="locateRestInMap(rest)">click here</a></td>
            </tr>
            </tbody>
            <tfoot>
            <tr>
                <th>Restaurant Name</th>
                <th>Price Category</th>
                <th>Rating</th>
                <th>Show on map</th>
            </tr>
            </tfoot>
        </table>
    </div>

<!--discover new cusines-->
<div ng-show="searchType == 1" style="width:800px; margin:0 auto; text-align: left;">
    <br>
    <div id="cuisineMainDiv">
        <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="discoverNewCuisineBaseSelect">
            <option ng-repeat="cuisine in discoverNewCuisine" value="{{cuisine.cuisine_id}}">{{cuisine.cuisine_name}}</option>
        </select>
        <div class="custom-control custom-radio">
            <input ng-model="cuisineSubmitChoice" ng-value="0" type="radio" class="custom-control-input" id="DiscoverSimilarCuisinesRad" name="cuisineChoiceRadios" checked>
            <label class="custom-control-label" for="DiscoverSimilarCuisinesRad">Discover similar cuisines</label>
        </div>
        <div class="custom-control custom-radio">
            <input ng-model="cuisineSubmitChoice" ng-value="1" type="radio" class="custom-control-input" id="ShowCuisineIngRad" name="cuisineChoiceRadios">
            <label class="custom-control-label" for="ShowCuisineIngRad">Show cuisine's unique ingredients</label>
        </div>
        <br>
        <input class="btn btn-success" type="submit" ng-click="submitDiscoverNewCuisine()" value="Submit">
        <div>
            <div ng-show="newCuisinesLoading == 1">Loading...</div>
        <br>

            <div ng-hide="showNewCuisinesTable == 0">
        <table  datatable="ng" dt-options="newCusTableOptions" id="discoverNewCuisinesTable" class="table table-striped table-bordered" style="margin: 0 auto;">
            <thead>
            <tr>
                <th>Cuisine Name</th>
                <th>Match Value</th>
            </tr>
            </thead>
            <tbody>
            <tr  style="text-align: center;" ng-repeat="cuisine in newCuisines">
                <td>{{cuisine.cuisine_name}}</td>
                <td>{{cuisine.match_value}}</td>
            </tr>
            </tbody>
        </table>
            </div>

            <div ng-hide="showCuisineUniqueTable == 0">
            <table datatable="ng" id="CuisineUniqueTable" class="table table-striped table-bordered" style="margin: 0 auto;">
                <thead>
                <tr>
                    <th>Ingredient</th>
                    <th>Num. of occurrences</th>
                </tr>
                </thead>
                <tbody>
                <tr  style="text-align: center;" ng-repeat="ing in cuisineUniqueIng">
                    <td>{{ing.ingredient}}</td>
                    <td>{{ing.ingcount}}</td>
                </tr>
                </tbody>
            </table>
            </div>
    </div>
</div>

<!--Unique ingredients of cuisine-->
<!--<div ng-show="searchType == 2" style="width:800px; margin:0 auto; text-align: left;">-->
    <!--<div id="uniqueIngredMainDiv">-->
        <!--<div angucomplete-alt id="uniqueIngred" placeholder="Insert ingredient..." selected-object="selectedObj" local-data="autoCompleteRes"-->
             <!--search-fields="entry_name" text-searching="Searching for results..." title-field="entry_name" minlength="1"-->
             <!--input-class="form-control form-control-small" match-class="highlight"> //input-changed="autoComplete"-->
        <!--</div>-->
        <!--<input class="btn btn-success" type="submit" ng-click="submitUniqueIngredients()" value="Search">-->
    <!--</div>-->
    <!--<div>-->
        <!--<br>-->
        <!--Unique ingredients:-->
        <!--<table style="margin: 0 auto;">-->
            <!--<tr  style="text-align: center;" ng-repeat="ingred in uniqueIngredintsResult">-->
                <!--<td>{{ingred.ingredient}}</td>-->
            <!--</tr>-->
        <!--</table>-->
    <!--</div>-->
<!--</div>-->
</div>
    <div>
        <!--new_franchise div-->
        <div ng-show="searchType == 2" style="width:800px; margin:0 auto; text-align: left;">
            <div id="new_franchise">
                <br>
                <p>Locate the center of the map</p>
                <br>
                <input class="btn btn-success" type="submit" ng-click="getLocation()" value="Search">
                <div ng-show="newFranchiseLoading == 1">Loading...</div>
            </div>
            <div>

                Franchise found:

                <div ng-show="showNewFranchiseTable == 1">
                <table datatable="ng" id="newFranchiseTable" class="table table-striped table-bordered" style="margin: 0 auto;">
                    <thead>
                    <tr>
                        <th>Restaurant Name</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr  style="text-align: center;" ng-repeat="franch in newFranchiseArr">
                        <td>{{franch.restaurant_name}}</td>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <th>Restaurant Name</th>
                    </tr>
                    </tfoot>
                </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-show="searchType == 3" style="width:800px; margin:0 auto; text-align: left;">
    <div id="restByTasteDiv">
        <div class="checkbox">
            <label>
                <input ng-model="saltToggleValue" id="saltToggle" type="checkbox" data-toggle="toggle" data-on="High" data-off="Low">
                Saltiness
            </label>
        </div>
        <div class="checkbox">
            <label>
                <input ng-model="sweetToggleValue" id="sweetToggle" type="checkbox" data-toggle="toggle" data-on="High" data-off="Low">
                Sweetness
            </label>
        </div>
        <div class="checkbox">
            <label>
                <input ng-model="sourToggleValue" id="sourToggle" type="checkbox" data-toggle="toggle" data-on="High" data-off="Low">
                Sourness
            </label>
        </div>
        <div class="checkbox">
            <label>
                <input ng-model="bitterToggleValue" id="bitterToggle" type="checkbox" data-toggle="toggle" data-on="High" data-off="Low">
                Bitterness
            </label>
        </div>

        <input class="btn btn-success" type="submit" ng-click="submitSearchRestByTaste()" value="Submit">
        <div>
            <div ng-show="restByTasteLoading == 1">Loading...</div>
            <br>

            <div ng-hide="restByTasteTableDivShow == 0">
                <table datatable="ng" id="restFromTasteTable" class="table table-striped table-bordered" style="margin: 0 auto;">
                    <thead>
                    <tr>
                        <th>Restaurant Name</th>
                        <th>Establishment Name</th>
                        <th>Price Category</th>
                        <th>Rating</th>
                        <th>Online Delivery</th>
                        <th>Show on map</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr  style="text-align: center;" ng-repeat="rest in restsByTaste">
                        <td>{{rest.restaurant_name}}</td>
                        <td>{{rest.establishment_name}}</td>
                        <td>{{rest.price_category}}</td>
                        <td>{{rest.agg_review}}</td>
                        <td>{{rest.has_online_delivery}}</td>
                        <td><a href ng-click="locateRestInMap(rest)">click here</a></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!--common ingredients-->
<div ng-show="searchType == 4" style="width:800px; margin:0 auto; text-align: left;">
    <br>
    <div id="commonIngred">
        <div angucomplete-alt id="commonIngredient" placeholder="Insert ingredient..." selected-object="selectedObj" text-searching="Searching for results..." remote-api-handler="autocompleteIngHandler"
             title-field="ingredient" minlength="1" input-class="form-control form-control-small" input-changed="autoComplete" match-class="highlight" parse-input="parseInput">
        </div>
        <br>
        <input class="btn btn-success" type="submit" ng-click="submitCommonIngred()" value="Submit">
        <div>
            <div ng-show="commonIngredLoading == 1">Loading...</div>
            <br>
            <div ng-hide="showCommonIngredTable == 0">
                <table  datatable="ng" dt-options="newCusTableOptions" id="discoverIngredTable" class="table table-striped table-bordered" style="margin: 0 auto;">
                    <thead>
                    <tr>
                        <th>Ingredient</th>
                        <th>count res</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr  style="text-align: center;" ng-repeat="cuisine in newCuisines">
                        <td>{{cuisine.cuisine_name}}</td>
                        <td>{{cuisine.match_value}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="static/js/fcController.js"></script>
</body>
</html>